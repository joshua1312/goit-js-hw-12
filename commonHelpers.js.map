{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page) {\n    const searchParams = new URLSearchParams({\n        key: '44481780-b4b938698ada11f180983274a',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n    });\n\n    const url = `https://pixabay.com/api/?${searchParams}`;\n\n    try {\n        const response = await axios(url);\n        return response.data;\n    } catch (error) {\n        throw new Error('Failed to fetch images');\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.getElementById('gallery');\n\nexport function renderImages(images) {\n    let markup = '';\n\n    markup = images\n        .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads, }) => {\n            return `<li class=\"card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\">\n        </a>\n        <ul class=\"info-list\">\n            <li>\n                <p class=\"info-title\">Likes</p>\n                <p class=\"info-data\">${likes}</p>\n            </li>\n            <li>\n                <p class=\"info-title\">Views</p>\n                <p class=\"info-data\">${views}</p>\n            </li>\n            <li>\n                <p class=\"info-title\">Comments</p>\n                <p class=\"info-data\">${comments}</p>\n            </li>\n            <li>\n                <p class=\"info-title\">Downloads</p>\n                <p class=\"info-data\">${downloads}</p>\n            </li>\n          </ul>\n      </li>`;\n        }\n        )\n        .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n    lightbox.refresh();\n}\n\nexport function showErrorMessage(message) {\n    iziToast.error({\n        message: message,\n        position: 'bottomCenter',\n    });\n}\n\nexport function showWarningMessage(message) {\n    iziToast.warning({\n        message: message,\n        position: 'bottomCenter',\n    });\n}\n\nexport function showInfoMessage(message) {\n    iziToast.info({\n        message: message,\n        position: 'bottomCenter',\n    });\n}\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n    renderImages,\n    showErrorMessage,\n    showWarningMessage,\n    showInfoMessage,\n} from './js/render-functions.js';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst pendingIcon = document.getElementById('pending-icon');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    const query = searchInput.value.trim();\n\n    if (query === '') {\n        showWarningMessage('Please enter a search query');\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n\n    try {\n        pendingIcon.style.display = 'block';\n\n        const data = await fetchImages(currentQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            showErrorMessage(\n                'Sorry, there are no images matching your search query. Please try again!'\n            );\n        } else {\n            gallery.innerHTML = '';\n            renderImages(data.hits);\n            if (data.totalHits > currentPage * 15) {\n                loadMoreBtn.style.display = 'block';\n            } else {\n                loadMoreBtn.style.display = 'none';\n            }\n        }\n    } catch (error) {\n        showErrorMessage('Failed to fetch images. Please try again later.');\n    } finally {\n        pendingIcon.style.display = 'none';\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n\n    pendingIcon.style.display = 'block';\n\n    try {\n        const data = await fetchImages(currentQuery, currentPage);\n        pendingIcon.style.display = 'none';\n        if (data.hits.length > 0) {\n            renderImages(data.hits);\n            if (data.totalHits > currentPage * 15) {\n                loadMoreBtn.style.display = 'block';\n            } else {\n                loadMoreBtn.style.display = 'none';\n                showInfoMessage(\n                    \"We're sorry, but you've reached the end of search results.\"\n                );\n            }\n\n            const cardHeight = document\n                .querySelector('.card')\n                .getBoundingClientRect().height;\n\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth',\n            });\n        }\n    } catch (error) {\n        showErrorMessage('Failed to load more images. Please try again later.');\n    }\n    finally {\n        pendingIcon.style.display = 'none';\n    }\n});"],"names":["fetchImages","query","page","url","axios","gallery","renderImages","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","SimpleLightbox","showErrorMessage","message","iziToast","showWarningMessage","showInfoMessage","searchForm","searchInput","loadMoreBtn","pendingIcon","currentPage","currentQuery","event","data","cardHeight"],"mappings":"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"}